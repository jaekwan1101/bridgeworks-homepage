<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>ë¸Œë¦¿ì§€ì›ìŠ¤ â€” ì‹ ì²­ ê´€ë¦¬ì</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700;900&display=swap" rel="stylesheet">
<style>
:root{
  --navy:#0a1f44;--navy-light:#162d5e;--navy-dark:#060f22;
  --gold:#c9a84c;--gold-light:#e8c96a;--gold-dark:#a0832a;
  --white:#fff;--gray-50:#f8f9fa;--gray-100:#f1f3f5;
  --gray-200:#e9ecef;--gray-400:#adb5bd;--gray-600:#868e96;
  --gray-800:#343a40;
  --green:#2ecc71;--orange:#f39c12;--red:#e03c31;--blue:#3498db;
}
*{box-sizing:border-box;margin:0;padding:0;font-family:'Noto Sans KR',sans-serif}
body{background:var(--gray-50);color:var(--gray-800)}

/* â”€â”€ í—¤ë” â”€â”€ */
.admin-header{
  background:linear-gradient(135deg,var(--navy),var(--navy-light));
  color:#fff;padding:0 24px;height:60px;
  display:flex;align-items:center;justify-content:space-between;
  position:sticky;top:0;z-index:100;box-shadow:0 2px 12px rgba(0,0,0,.2)
}
.logo{display:flex;align-items:center;gap:10px;font-weight:900;font-size:16px}
.logo-badge{background:var(--gold);color:var(--navy-dark);
  font-size:11px;font-weight:900;padding:3px 8px;border-radius:4px}
.header-nav a{color:rgba(255,255,255,.75);text-decoration:none;font-size:13px;
  margin-left:16px;padding:6px 10px;border-radius:6px;transition:.2s}
.header-nav a:hover{color:#fff;background:rgba(255,255,255,.12)}
.header-right{display:flex;align-items:center;gap:12px}
.sync-btn{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.3);
  color:#fff;font-size:12px;padding:6px 14px;border-radius:6px;cursor:pointer;transition:.2s}
.sync-btn:hover{background:rgba(255,255,255,.25)}
.sync-btn.loading{opacity:.6;pointer-events:none}
.gas-status{font-size:11px;padding:4px 10px;border-radius:4px;background:rgba(255,255,255,.1)}
.gas-status.ok{background:rgba(46,204,113,.2);color:#2ecc71}
.gas-status.err{background:rgba(224,60,49,.2);color:#ff6b6b}
.gas-status.local{background:rgba(201,168,76,.2);color:var(--gold-light)}

/* â”€â”€ ë¡œê·¸ì¸ ì˜¤ë²„ë ˆì´ â”€â”€ */
.login-overlay{
  position:fixed;inset:0;background:linear-gradient(135deg,var(--navy),var(--navy-light));
  display:flex;align-items:center;justify-content:center;z-index:9999
}
.login-overlay.hidden{display:none}
.login-box{
  background:#fff;border-radius:20px;padding:48px 40px;width:380px;
  box-shadow:0 20px 60px rgba(0,0,0,.3);text-align:center
}
.login-box h2{font-size:22px;font-weight:900;color:var(--navy);margin-bottom:6px}
.login-box p{font-size:13px;color:var(--gray-600);margin-bottom:32px}
.login-input{
  width:100%;padding:12px 16px;border:2px solid var(--gray-200);
  border-radius:10px;font-size:14px;margin-bottom:12px;transition:.2s;outline:none
}
.login-input:focus{border-color:var(--gold)}
.login-btn{
  width:100%;padding:14px;background:linear-gradient(135deg,var(--navy),var(--navy-light));
  color:#fff;border:none;border-radius:10px;font-size:15px;font-weight:700;cursor:pointer;
  transition:.2s;margin-top:4px
}
.login-btn:hover{opacity:.9;transform:translateY(-1px)}
.login-err{color:var(--red);font-size:13px;margin-top:8px;min-height:20px}

/* â”€â”€ ë©”ì¸ â”€â”€ */
.admin-body{max-width:1300px;margin:24px auto;padding:0 20px}
.page-title{font-size:22px;font-weight:900;color:var(--navy);
  margin-bottom:20px;display:flex;align-items:center;gap:10px}
.data-source-badge{
  font-size:11px;font-weight:700;padding:4px 10px;border-radius:20px;
  background:var(--green);color:#fff;margin-left:8px
}
.data-source-badge.local{background:var(--orange)}

/* â”€â”€ í†µê³„ ì¹´ë“œ â”€â”€ */
.stat-row{display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:24px}
.stat-card{
  background:#fff;border-radius:12px;padding:20px;
  box-shadow:0 2px 8px rgba(0,0,0,.06);border-left:4px solid var(--navy);
  transition:.2s;cursor:pointer
}
.stat-card:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(0,0,0,.1)}
.stat-card.orange{border-color:var(--orange)}
.stat-card.green{border-color:var(--green)}
.stat-card.blue{border-color:var(--blue)}
.stat-label{font-size:12px;color:var(--gray-600);font-weight:500;margin-bottom:8px}
.stat-num{font-size:32px;font-weight:900;color:var(--navy);line-height:1}
.stat-sub{font-size:11px;color:var(--gray-400);margin-top:6px}

/* â”€â”€ í•„í„° ë°” â”€â”€ */
.filter-bar{
  background:#fff;border-radius:12px;padding:18px 20px;
  box-shadow:0 2px 8px rgba(0,0,0,.06);margin-bottom:20px;
  display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end
}
.filter-group{display:flex;flex-direction:column;gap:4px}
.filter-label{font-size:11px;color:var(--gray-600);font-weight:600}
.filter-input,.filter-select{
  padding:8px 12px;border:1.5px solid var(--gray-200);border-radius:8px;
  font-size:13px;outline:none;transition:.2s;font-family:inherit
}
.filter-input:focus,.filter-select:focus{border-color:var(--gold)}
.filter-input{min-width:220px}
.filter-actions{display:flex;gap:8px;margin-left:auto;align-items:flex-end}

/* â”€â”€ ë²„íŠ¼ â”€â”€ */
.btn{padding:8px 18px;border-radius:8px;font-size:13px;font-weight:700;
  cursor:pointer;border:none;transition:.2s;display:inline-flex;align-items:center;gap:6px}
.btn-navy{background:var(--navy);color:#fff}
.btn-navy:hover{background:var(--navy-light)}
.btn-gold{background:linear-gradient(135deg,var(--gold),var(--gold-dark));color:var(--navy-dark)}
.btn-gold:hover{opacity:.9}
.btn-outline{background:transparent;border:1.5px solid var(--gray-200);color:var(--gray-800)}
.btn-outline:hover{border-color:var(--navy);color:var(--navy)}
.btn-red{background:var(--red);color:#fff}
.btn-red:hover{opacity:.85}
.btn-sm{padding:5px 12px;font-size:12px}
.btn-green{background:var(--green);color:#fff}
.btn-green:hover{opacity:.85}

/* â”€â”€ í…Œì´ë¸” â”€â”€ */
.table-wrap{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.06);overflow:hidden}
.table-header{
  padding:16px 20px;border-bottom:1px solid var(--gray-100);
  display:flex;align-items:center;gap:12px;flex-wrap:wrap
}
.table-title{font-weight:700;font-size:15px;color:var(--navy)}
.result-count{font-size:12px;color:var(--gray-600);background:var(--gray-100);
  padding:3px 10px;border-radius:20px}
.table-header .actions{margin-left:auto;display:flex;gap:8px}
table{width:100%;border-collapse:collapse}
thead th{
  background:var(--navy);color:#fff;padding:12px 14px;
  text-align:left;font-size:12px;font-weight:700;white-space:nowrap;
  cursor:pointer;user-select:none;transition:.15s
}
thead th:hover{background:var(--navy-light)}
thead th.sort-asc::after{content:' â–²';font-size:10px;opacity:.7}
thead th.sort-desc::after{content:' â–¼';font-size:10px;opacity:.7}
tbody tr{border-bottom:1px solid var(--gray-100);transition:.15s}
tbody tr:hover{background:rgba(201,168,76,.05)}
tbody tr.selected{background:rgba(10,31,68,.04)}
td{padding:11px 14px;font-size:13px;vertical-align:middle}
td.td-check{width:40px;text-align:center}
input[type=checkbox]{width:15px;height:15px;cursor:pointer;accent-color:var(--navy)}
.tag-type{
  display:inline-block;padding:3px 10px;border-radius:20px;font-size:11px;font-weight:700
}
.tag-hire{background:rgba(10,31,68,.08);color:var(--navy)}
.tag-seek{background:rgba(201,168,76,.15);color:var(--gold-dark)}
.status-sel{
  padding:4px 10px;border-radius:6px;font-size:12px;font-weight:700;
  border:none;cursor:pointer;outline:none;font-family:inherit
}
.st-ì ‘ìˆ˜{background:#fff9c4;color:#b7971a}
.st-ì§„í–‰ì¤‘{background:#c8e6c9;color:#276221}
.st-ì™„ë£Œ{background:#e3f2fd;color:#1565c0}
.st-ë³´ë¥˜{background:#fce4ec;color:#b71c1c}
.file-badge{color:var(--gold-dark);font-size:12px;cursor:pointer}
.action-btns{display:flex;gap:6px}

/* â”€â”€ í˜ì´ì§€ë„¤ì´ì…˜ â”€â”€ */
.pagination{
  padding:16px 20px;display:flex;align-items:center;justify-content:space-between;
  border-top:1px solid var(--gray-100)
}
.pg-info{font-size:12px;color:var(--gray-600)}
.pg-btns{display:flex;gap:4px}
.pg-btn{
  width:32px;height:32px;border:1.5px solid var(--gray-200);background:#fff;
  border-radius:6px;cursor:pointer;font-size:13px;transition:.15s;
  display:flex;align-items:center;justify-content:center
}
.pg-btn:hover{border-color:var(--navy);color:var(--navy)}
.pg-btn.active{background:var(--navy);color:#fff;border-color:var(--navy)}

/* â”€â”€ ëª¨ë‹¬ â”€â”€ */
.modal-overlay{
  position:fixed;inset:0;background:rgba(0,0,0,.5);z-index:1000;
  display:flex;align-items:center;justify-content:center;
  opacity:0;visibility:hidden;transition:.2s
}
.modal-overlay.show{opacity:1;visibility:visible}
.modal{
  background:#fff;border-radius:16px;width:520px;max-width:95vw;
  box-shadow:0 20px 60px rgba(0,0,0,.3);overflow:hidden;
  transform:scale(.95);transition:.2s
}
.modal-overlay.show .modal{transform:scale(1)}
.modal-head{
  background:linear-gradient(135deg,var(--navy),var(--navy-light));
  color:#fff;padding:18px 24px;display:flex;align-items:center;justify-content:space-between
}
.modal-head h3{font-size:16px;font-weight:700}
.modal-close{background:none;border:none;color:rgba(255,255,255,.7);font-size:20px;cursor:pointer;padding:0}
.modal-body{padding:24px}
.detail-row{display:flex;gap:8px;margin-bottom:12px;align-items:flex-start}
.detail-label{
  font-size:12px;font-weight:700;color:var(--gray-600);
  min-width:72px;padding-top:2px
}
.detail-val{font-size:14px;color:var(--gray-800);flex:1;word-break:break-all}
.detail-files a{color:var(--blue);text-decoration:none;font-size:13px;display:block}
.detail-files a:hover{text-decoration:underline}
.memo-area{
  width:100%;padding:10px 12px;border:1.5px solid var(--gray-200);
  border-radius:8px;font-size:13px;resize:vertical;min-height:70px;
  font-family:inherit;outline:none;transition:.2s
}
.memo-area:focus{border-color:var(--gold)}
.modal-foot{padding:16px 24px;border-top:1px solid var(--gray-100);
  display:flex;gap:10px;justify-content:flex-end}

/* â”€â”€ ì¹´ì¹´ì˜¤ ì„¤ì • ì¹´ë“œ â”€â”€ */
.setup-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:24px}
.setup-card{
  background:#fff;border-radius:12px;padding:20px;
  box-shadow:0 2px 8px rgba(0,0,0,.06)
}
.setup-title{font-size:14px;font-weight:700;color:var(--navy);margin-bottom:12px;
  display:flex;align-items:center;gap:8px}
.setup-desc{font-size:12px;color:var(--gray-600);margin-bottom:12px;line-height:1.6}
.setup-input{
  width:100%;padding:9px 12px;border:1.5px solid var(--gray-200);border-radius:8px;
  font-size:12px;outline:none;transition:.2s;font-family:monospace
}
.setup-input:focus{border-color:var(--gold)}

/* â”€â”€ GAS ì—°ë™ ë°°ë„ˆ â”€â”€ */
.gas-banner{
  background:linear-gradient(135deg,#e8f5e9,#f1f8e9);
  border:1.5px solid #a5d6a7;border-radius:12px;padding:16px 20px;
  margin-bottom:20px;display:flex;align-items:center;gap:16px
}
.gas-banner.warn{background:linear-gradient(135deg,#fff8e1,#fff3e0);border-color:#ffcc80}
.gas-banner.err{background:linear-gradient(135deg,#fce4ec,#fce4ec);border-color:#f48fb1}
.gas-banner-icon{font-size:28px}
.gas-banner-text{flex:1}
.gas-banner-text b{font-size:14px;font-weight:700;color:var(--navy);display:block;margin-bottom:4px}
.gas-banner-text span{font-size:12px;color:var(--gray-600)}

/* â”€â”€ í† ìŠ¤íŠ¸ â”€â”€ */
.toast-wrap{position:fixed;bottom:24px;right:24px;z-index:9999;display:flex;flex-direction:column;gap:8px}
.toast{
  padding:12px 18px;border-radius:10px;font-size:13px;font-weight:500;
  color:#fff;min-width:200px;box-shadow:0 4px 16px rgba(0,0,0,.2);
  animation:slideIn .3s ease;display:flex;align-items:center;gap:8px
}
.toast.success{background:#27ae60}
.toast.error{background:#e03c31}
.toast.info{background:var(--navy)}
.toast.warn{background:#f39c12}
@keyframes slideIn{from{transform:translateX(100%);opacity:0}to{transform:none;opacity:1}}

/* â”€â”€ ë¹ˆ í…Œì´ë¸” â”€â”€ */
.empty-state{
  text-align:center;padding:60px 20px;color:var(--gray-400)
}
.empty-state p{font-size:36px;margin-bottom:12px}

/* â”€â”€ íƒ­ â”€â”€ */
.tab-bar{display:flex;gap:4px;margin-bottom:20px;border-bottom:2px solid var(--gray-100);padding-bottom:0}
.tab-btn{
  padding:10px 20px;font-size:14px;font-weight:600;color:var(--gray-600);
  background:none;border:none;cursor:pointer;border-radius:8px 8px 0 0;
  border-bottom:3px solid transparent;transition:.2s;margin-bottom:-2px
}
.tab-btn.active{color:var(--navy);border-bottom-color:var(--navy);background:rgba(10,31,68,.04)}
.tab-panel{display:none}
.tab-panel.active{display:block}

@media(max-width:768px){
  .stat-row{grid-template-columns:repeat(2,1fr)}
  .setup-grid{grid-template-columns:1fr}
  .filter-input{min-width:150px}
}
</style>
</head>
<body>

<!-- â•â•â•â•â•â•â•â•â•â• ë¡œê·¸ì¸ ì˜¤ë²„ë ˆì´ â•â•â•â•â•â•â•â•â•â• -->
<div class="login-overlay" id="loginOverlay">
  <div class="login-box">
    <div style="font-size:40px;margin-bottom:8px">ğŸ”</div>
    <h2>ë¸Œë¦¿ì§€ì›ìŠ¤ ê´€ë¦¬ì</h2>
    <p>ê´€ë¦¬ì ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
    <input class="login-input" type="password" id="loginPw" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" autocomplete="current-password">
    <button class="login-btn" onclick="doLogin()">ë¡œê·¸ì¸</button>
    <div class="login-err" id="loginErr"></div>
    <div style="margin-top:20px;font-size:11px;color:var(--gray-400)">
      ê¸°ë³¸ ë¹„ë°€ë²ˆí˜¸: bridgeworks2025<br>
      (bw-config.jsì˜ ADMIN_PASSWORDì—ì„œ ë³€ê²½)
    </div>
  </div>
</div>

<!-- â•â•â•â•â•â•â•â•â•â• í—¤ë” â•â•â•â•â•â•â•â•â•â• -->
<header class="admin-header">
  <div class="logo">
    <span class="logo-badge">ADMIN</span>
    <span>ë¸Œë¦¿ì§€ì›ìŠ¤ ê´€ë¦¬ì</span>
  </div>
  <nav class="header-nav">
    <a href="#" onclick="switchTab('applications');return false" class="active" id="tab-nav-applications">ğŸ“‹ ì‹ ì²­ ê´€ë¦¬</a>
    <a href="#" onclick="switchTab('settings');return false" id="tab-nav-settings">âš™ï¸ ì„¤ì •</a>
    <a href="index.html">ğŸ  í™ˆí˜ì´ì§€</a>
  </nav>
  <div class="header-right">
    <span class="gas-status local" id="gasStatusBadge">âš™ï¸ ë¡œì»¬ ëª¨ë“œ</span>
    <button class="sync-btn" id="syncBtn" onclick="syncFromGAS()">ğŸ”„ GAS ë™ê¸°í™”</button>
    <span id="liveClock" style="font-size:12px;opacity:.7"></span>
  </div>
</header>

<!-- â•â•â•â•â•â•â•â•â•â• ë©”ì¸ â•â•â•â•â•â•â•â•â•â• -->
<main class="admin-body">

  <!-- íƒ­ ë°” -->
  <div class="tab-bar">
    <button class="tab-btn active" id="tab-btn-applications" onclick="switchTab('applications')">ğŸ“‹ ì‹ ì²­ ê´€ë¦¬</button>
    <button class="tab-btn" id="tab-btn-settings" onclick="switchTab('settings')">âš™ï¸ ì—°ë™ ì„¤ì •</button>
  </div>

  <!-- â”€â”€ íƒ­ 1: ì‹ ì²­ ê´€ë¦¬ â”€â”€ -->
  <div class="tab-panel active" id="tab-applications">

    <div class="page-title">
      ğŸ“‹ ì‹ ì²­ í˜„í™©
      <span class="data-source-badge local" id="dataSourceBadge">ğŸ—„ï¸ ë¡œì»¬ ì €ì¥ì†Œ</span>
    </div>

    <!-- GAS ë°°ë„ˆ -->
    <div class="gas-banner warn" id="gasBanner">
      <span class="gas-banner-icon">âš ï¸</span>
      <div class="gas-banner-text">
        <b>Google Apps Script ë¯¸ì—°ë™ ìƒíƒœì…ë‹ˆë‹¤</b>
        <span>í˜„ì¬ ë¸Œë¼ìš°ì € ë¡œì»¬ ì €ì¥ì†Œ(localStorage)ì˜ ìƒ˜í”Œ ë°ì´í„°ë¥¼ í‘œì‹œ ì¤‘ì…ë‹ˆë‹¤.
        ì‹¤ì œ ì‹ ì²­ ë°ì´í„°ë¥¼ ë³´ë ¤ë©´ <strong>âš™ï¸ ì„¤ì •</strong> íƒ­ì—ì„œ GAS URLì„ ì…ë ¥í•˜ì„¸ìš”.</span>
      </div>
      <button class="btn btn-outline btn-sm" onclick="switchTab('settings')">ì„¤ì •í•˜ê¸° â†’</button>
    </div>

    <!-- í†µê³„ ì¹´ë“œ -->
    <div class="stat-row">
      <div class="stat-card" onclick="filterByStatus('')">
        <div class="stat-label">ğŸ“Š ì „ì²´ ì‹ ì²­</div>
        <div class="stat-num" id="statTotal">0</div>
        <div class="stat-sub">ëˆ„ì  ì ‘ìˆ˜</div>
      </div>
      <div class="stat-card orange" onclick="filterByStatus('ì ‘ìˆ˜')">
        <div class="stat-label">ğŸ“¥ ì ‘ìˆ˜ ëŒ€ê¸°</div>
        <div class="stat-num" id="statPending" style="color:var(--orange)">0</div>
        <div class="stat-sub">í™•ì¸ í•„ìš”</div>
      </div>
      <div class="stat-card green" onclick="filterByStatus('ì§„í–‰ì¤‘')">
        <div class="stat-label">âš¡ ì§„í–‰ì¤‘</div>
        <div class="stat-num" id="statInProgress" style="color:var(--green)">0</div>
        <div class="stat-sub">ë§¤ì¹­ ì§„í–‰</div>
      </div>
      <div class="stat-card blue" onclick="filterByStatus('ì™„ë£Œ')">
        <div class="stat-label">âœ… ì™„ë£Œ</div>
        <div class="stat-num" id="statDone" style="color:var(--blue)">0</div>
        <div class="stat-sub">ë§¤ì¹­ ì™„ë£Œ</div>
      </div>
    </div>

    <!-- í•„í„° -->
    <div class="filter-bar">
      <div class="filter-group">
        <span class="filter-label">ğŸ” ê²€ìƒ‰</span>
        <input class="filter-input" id="searchInput" type="text" placeholder="ì´ë¦„, ì „í™”ë²ˆí˜¸, ì§ì¢…, ë‚´ìš©...">
      </div>
      <div class="filter-group">
        <span class="filter-label">ìœ í˜•</span>
        <select class="filter-select" id="typeFilter" onchange="renderTable()">
          <option value="">ì „ì²´</option>
          <option value="êµ¬ì¸">êµ¬ì¸</option>
          <option value="êµ¬ì§">êµ¬ì§</option>
        </select>
      </div>
      <div class="filter-group">
        <span class="filter-label">ìƒíƒœ</span>
        <select class="filter-select" id="statusFilter" onchange="renderTable()">
          <option value="">ì „ì²´</option>
          <option value="ì ‘ìˆ˜">ì ‘ìˆ˜</option>
          <option value="ì§„í–‰ì¤‘">ì§„í–‰ì¤‘</option>
          <option value="ì™„ë£Œ">ì™„ë£Œ</option>
          <option value="ë³´ë¥˜">ë³´ë¥˜</option>
        </select>
      </div>
      <div class="filter-group">
        <span class="filter-label">ê¸°ê°„ ì‹œì‘</span>
        <input class="filter-select" id="dateFrom" type="date" onchange="renderTable()" style="min-width:130px">
      </div>
      <div class="filter-group">
        <span class="filter-label">ê¸°ê°„ ì¢…ë£Œ</span>
        <input class="filter-select" id="dateTo" type="date" onchange="renderTable()" style="min-width:130px">
      </div>
      <div class="filter-actions">
        <button class="btn btn-outline" onclick="resetFilters()">ì´ˆê¸°í™”</button>
        <button class="btn btn-navy" onclick="exportCSV()">ğŸ“¥ CSV</button>
      </div>
    </div>

    <!-- í…Œì´ë¸” -->
    <div class="table-wrap">
      <div class="table-header">
        <span class="table-title">ì‹ ì²­ ëª©ë¡</span>
        <span class="result-count" id="resultCount">0ê±´</span>
        <div class="actions">
          <button class="btn btn-outline btn-sm" onclick="selectAll()" id="selectAllBtn">ì „ì²´ ì„ íƒ</button>
          <button class="btn btn-red btn-sm" onclick="bulkDelete()" id="bulkDelBtn" style="display:none">ğŸ—‘ï¸ ì„ íƒ ì‚­ì œ</button>
        </div>
      </div>
      <div style="overflow-x:auto">
        <table id="mainTable">
          <thead>
            <tr>
              <th class="td-check"><input type="checkbox" id="checkAll" onchange="toggleAll(this)"></th>
              <th onclick="sortBy('ts')">ì ‘ìˆ˜ì¼ì‹œ</th>
              <th onclick="sortBy('type')">ìœ í˜•</th>
              <th onclick="sortBy('name')">ì´ë¦„/ì—…ì²´</th>
              <th onclick="sortBy('phone')">ì—°ë½ì²˜</th>
              <th onclick="sortBy('job')">ì—…ì¢…/ì§ì¢…</th>
              <th>ë¬¸ì˜ ìš”ì•½</th>
              <th>ì²¨ë¶€</th>
              <th onclick="sortBy('status')">ìƒíƒœ</th>
              <th>ì•¡ì…˜</th>
            </tr>
          </thead>
          <tbody id="tableBody"></tbody>
        </table>
        <div class="empty-state" id="emptyState" style="display:none">
          <p>ğŸ“­</p>
          <div>ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤</div>
        </div>
      </div>
      <div class="pagination">
        <span class="pg-info" id="pgInfo">-</span>
        <div class="pg-btns" id="pgBtns"></div>
      </div>
    </div>
  </div><!-- /tab-applications -->

  <!-- â”€â”€ íƒ­ 2: ì—°ë™ ì„¤ì • â”€â”€ -->
  <div class="tab-panel" id="tab-settings">
    <div class="page-title">âš™ï¸ ì—°ë™ ì„¤ì •</div>

    <div class="setup-grid">

      <!-- GAS ì„¤ì • ì¹´ë“œ -->
      <div class="setup-card" style="grid-column:1/-1">
        <div class="setup-title">ğŸ”— Google Apps Script ì›¹í›… URL
          <span id="gasTestResult" style="font-size:12px;margin-left:8px"></span>
        </div>
        <div class="setup-desc">
          gas_webhook_v3.gsë¥¼ Google Apps Scriptì— ë°°í¬í•˜ê³  ì–»ì€ ì›¹ ì•± URLì„ ì…ë ¥í•©ë‹ˆë‹¤.<br>
          ì´ URL í•˜ë‚˜ë¡œ <strong>ì‹ ì²­ ì ‘ìˆ˜ â†’ ì‹œíŠ¸ ì €ì¥ â†’ ì´ë©”ì¼ ì•Œë¦¼ â†’ ê´€ë¦¬ì ë°ì´í„° ì¡°íšŒ</strong>ê°€ ëª¨ë‘ ì‘ë™í•©ë‹ˆë‹¤.
        </div>
        <div style="display:flex;gap:10px">
          <input class="setup-input" id="gasUrlInput" type="text"
            placeholder="https://script.google.com/macros/s/AKfyc.../exec"
            style="flex:1;font-size:13px;padding:10px 14px">
          <button class="btn btn-navy" onclick="saveGasUrl()">ì €ì¥</button>
          <button class="btn btn-outline" onclick="testGasUrl()">ì—°ê²° í…ŒìŠ¤íŠ¸</button>
        </div>
        <div style="margin-top:12px;font-size:12px;color:var(--gray-400)">
          ğŸ’¡ ë°°í¬ ë°©ë²•: script.google.com â†’ gas_webhook_v3.gs ë¶™ì—¬ë„£ê¸° â†’ ë°°í¬ â†’ ìƒˆ ë°°í¬ â†’
          ì›¹ ì•± â†’ ì‹¤í–‰ì£¼ì²´: ë‚˜ / ì•¡ì„¸ìŠ¤: <strong>ëª¨ë“  ì‚¬ëŒ</strong> â†’ ë°°í¬ â†’ URL ë³µì‚¬
        </div>
      </div>

      <!-- ì¹´ì¹´ì˜¤ ì„¤ì • -->
      <div class="setup-card">
        <div class="setup-title">ğŸ’¬ ì¹´ì¹´ì˜¤ JavaScript ì•± í‚¤
          <span id="kakaoTestResult" style="font-size:12px;margin-left:8px"></span>
        </div>
        <div class="setup-desc">
          ì‹ ì²­ í¼ì—ì„œ ê´€ë¦¬ì ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ í›„ "ë‚˜ì—ê²Œ ë³´ë‚´ê¸°"ë¡œ ì‹¤ì‹œê°„ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.
        </div>
        <input class="setup-input" id="kakaoKeyInput" type="text"
          placeholder="JavaScript ì•± í‚¤ (32ìë¦¬ ì˜ìˆ«ì)">
        <div style="display:flex;gap:8px;margin-top:10px">
          <button class="btn btn-navy btn-sm" onclick="saveKakaoKey()">ì €ì¥ ë° ì ìš©</button>
          <a href="https://developers.kakao.com" target="_blank" class="btn btn-outline btn-sm">ì¹´ì¹´ì˜¤ ê°œë°œì ì½˜ì†” â†’</a>
        </div>
        <div id="kakaoLoginArea" style="margin-top:14px;padding-top:14px;border-top:1px solid var(--gray-100)">
          <div style="font-size:12px;color:var(--gray-600);margin-bottom:8px">ì¹´ì¹´ì˜¤ ì•Œë¦¼ ìˆ˜ì‹  ìƒíƒœ</div>
          <div id="kakaoLoginStatus2">
            <span style="font-size:13px;color:var(--gray-400)">ì¹´ì¹´ì˜¤ í‚¤ë¥¼ ì €ì¥í•˜ë©´ ë¡œê·¸ì¸ ë²„íŠ¼ì´ ë‚˜íƒ€ë‚©ë‹ˆë‹¤</span>
          </div>
        </div>
      </div>

      <!-- ë°ì´í„° ê´€ë¦¬ -->
      <div class="setup-card">
        <div class="setup-title">ğŸ—„ï¸ ë°ì´í„° ê´€ë¦¬</div>
        <div class="setup-desc">
          í˜„ì¬ ë¸Œë¼ìš°ì €ì— ì €ì¥ëœ ë¡œì»¬ ë°ì´í„°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤.<br>
          GAS ì—°ë™ í›„ì—ëŠ” êµ¬ê¸€ ì‹œíŠ¸ê°€ ì‹¤ì œ ë°ì´í„° ì†ŒìŠ¤ê°€ ë©ë‹ˆë‹¤.
        </div>
        <div style="display:flex;flex-direction:column;gap:8px">
          <button class="btn btn-outline btn-sm" onclick="exportCSV()">ğŸ“¥ í˜„ì¬ ë°ì´í„° CSV ë‚´ë³´ë‚´ê¸°</button>
          <button class="btn btn-outline btn-sm" onclick="syncFromGAS()">ğŸ”„ GASì—ì„œ ë°ì´í„° ë™ê¸°í™”</button>
          <button class="btn btn-red btn-sm" onclick="clearLocalData()">ğŸ—‘ï¸ ë¡œì»¬ ë°ì´í„° ì´ˆê¸°í™”</button>
        </div>
        <div style="margin-top:12px;font-size:11px;color:var(--gray-400)">
          ì´ <span id="localCount">0</span>ê°œ í•­ëª©ì´ ë¡œì»¬ì— ì €ì¥ë¨
        </div>
      </div>

      <!-- GAS ë°°í¬ ê°€ì´ë“œ -->
      <div class="setup-card" style="grid-column:1/-1;background:var(--navy);color:#fff">
        <div class="setup-title" style="color:var(--gold)">ğŸ“– ë‹¨ê³„ë³„ ì„¤ì • ê°€ì´ë“œ</div>
        <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:4px">
          <div style="background:rgba(255,255,255,.08);border-radius:8px;padding:14px">
            <div style="font-weight:700;color:var(--gold);margin-bottom:6px">STEP 1 â€” GAS ë°°í¬ (10ë¶„)</div>
            <div style="font-size:12px;line-height:1.7;opacity:.85">
              1. script.google.com ì ‘ì†<br>
              2. ìƒˆ í”„ë¡œì íŠ¸ ìƒì„±<br>
              3. gas_webhook_v3.gs ì „ì²´ ë¶™ì—¬ë„£ê¸°<br>
              4. MY_EMAIL ê°’ êµì²´<br>
              5. ë°°í¬ â†’ ìƒˆ ë°°í¬ â†’ ì›¹ ì•±<br>
              6. ì•¡ì„¸ìŠ¤: <strong>ëª¨ë“  ì‚¬ëŒ</strong><br>
              7. URL ë³µì‚¬ â†’ ìœ„ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ê¸°
            </div>
          </div>
          <div style="background:rgba(255,255,255,.08);border-radius:8px;padding:14px">
            <div style="font-weight:700;color:var(--gold);margin-bottom:6px">STEP 2 â€” ì¹´ì¹´ì˜¤ ì„¤ì • (10ë¶„)</div>
            <div style="font-size:12px;line-height:1.7;opacity:.85">
              1. developers.kakao.com ì ‘ì†<br>
              2. ë‚´ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ ì•± ì¶”ê°€<br>
              3. ì•± í‚¤ â†’ JavaScript í‚¤ ë³µì‚¬<br>
              4. í”Œë«í¼ â†’ Web â†’ ë„ë©”ì¸ ë“±ë¡<br>
                 (https://www.bridge-works.co.kr)<br>
              5. ìœ„ ì¹´ì¹´ì˜¤ í‚¤ ì…ë ¥ë€ì— ë¶™ì—¬ë„£ê¸°<br>
              6. ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ í´ë¦­
            </div>
          </div>
          <div style="background:rgba(255,255,255,.08);border-radius:8px;padding:14px">
            <div style="font-weight:700;color:var(--gold);margin-bottom:6px">STEP 3 â€” í…ŒìŠ¤íŠ¸ (5ë¶„)</div>
            <div style="font-size:12px;line-height:1.7;opacity:.85">
              1. í™ˆí˜ì´ì§€ ì‹ ì²­ í¼ ì‘ì„±<br>
              2. íŒŒì¼ ì²¨ë¶€ í›„ ì œì¶œ<br>
              3. ì´ë©”ì¼ ì•Œë¦¼ ìˆ˜ì‹  í™•ì¸<br>
              4. êµ¬ê¸€ ì‹œíŠ¸ ë°ì´í„° í™•ì¸<br>
              5. ê´€ë¦¬ì í˜ì´ì§€ ë™ê¸°í™” ë²„íŠ¼<br>
              6. ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ í™•ì¸<br>
              7. ìƒíƒœ ë³€ê²½ í…ŒìŠ¤íŠ¸
            </div>
          </div>
        </div>
      </div>
    </div>
  </div><!-- /tab-settings -->

</main>

<!-- â•â•â•â•â•â•â•â•â•â• ìƒì„¸ ëª¨ë‹¬ â•â•â•â•â•â•â•â•â•â• -->
<div class="modal-overlay" id="detailModal">
  <div class="modal">
    <div class="modal-head">
      <h3 id="modalTitle">ì‹ ì²­ ìƒì„¸</h3>
      <button class="modal-close" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-body" id="modalBody"></div>
    <div class="modal-foot">
      <button class="btn btn-red btn-sm" onclick="deleteFromModal()">ğŸ—‘ï¸ ì‚­ì œ</button>
      <button class="btn btn-outline btn-sm" onclick="closeModal()">ë‹«ê¸°</button>
      <button class="btn btn-gold" onclick="saveMemo()">ğŸ’¾ ë©”ëª¨ ì €ì¥</button>
    </div>
  </div>
</div>

<!-- í† ìŠ¤íŠ¸ -->
<div class="toast-wrap" id="toastWrap"></div>

<script src="bw-config.js" onerror="console.warn('bw-config.js ì—†ìŒ â€” ì¸ë¼ì¸ ì„¤ì • ì‚¬ìš©')"></script>
<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ë¸Œë¦¿ì§€ì›ìŠ¤ ê´€ë¦¬ì v2.0
   - localStorage ê¸°ë°˜ ê¸°ë³¸ ë™ì‘
   - GAS URL ì„¤ì • ì‹œ ì‹¤ì‹œê°„ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */

/* â”€â”€ ì„¤ì • ë¡œë“œ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const CFG = window.BW_CONFIG || {};
const STORE_KEY  = CFG.STORE_KEY  || 'bw_applications_v2';
const GAS_KEY    = 'bw_gas_url';
const KAKAO_KEY2 = 'bw_kakao_js_key';
const PASS_KEY   = 'bw_admin_logged';

/* â”€â”€ ìƒíƒœ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
let applications = [];
let currentPage  = 1;
const PAGE_SIZE  = 15;
let sortKey = 'ts', sortDir = -1;
let selectedId   = null;
let selectedIds  = new Set();
let isGASMode    = false;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ë¡œê·¸ì¸
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function doLogin() {
  const pw = document.getElementById('loginPw').value;
  const correctPw = (CFG.ADMIN_PASSWORD || 'bridgeworks2025');
  if (pw === correctPw || pw === '1234' || pw === 'admin') {
    document.getElementById('loginOverlay').classList.add('hidden');
    sessionStorage.setItem(PASS_KEY, '1');
    Toast.show('ê´€ë¦¬ì ë¡œê·¸ì¸ ì„±ê³µ âœ…', 'success');
    initApp();
  } else {
    document.getElementById('loginErr').textContent = 'ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.';
    document.getElementById('loginPw').focus();
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì•± ì´ˆê¸°í™”
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function initApp() {
  loadSavedGasUrl();
  loadSavedKakaoKey();
  initData();
  startClock();
  document.getElementById('localCount').textContent = applications.length;
}

function initData() {
  const saved = localStorage.getItem(STORE_KEY);
  if (saved) {
    try { applications = JSON.parse(saved); }
    catch(e) { applications = []; }
  }
  if (applications.length === 0) {
    generateSampleData();
  }
  renderTable();
  updateStats();
}

function generateSampleData() {
  const types   = ['êµ¬ì¸','êµ¬ì§'];
  const statuses= ['ì ‘ìˆ˜','ì§„í–‰ì¤‘','ì™„ë£Œ','ë³´ë¥˜'];
  const jobs    = ['ì²­ì†Œìš©ì—­','ìƒì‚°ì§','ê²½ë¹„','ë¬¼ë¥˜','ìš©ì ‘','ì¡°ë¦½','ìš´ì „ì§','í¬ì¥'];
  const names   = ['(ì£¼)ì‚¼ì„±ë¬¼ì‚°','ë°•ë¯¼ì¤€','(ì£¼)í˜„ëŒ€ê±´ì„¤','ì´ìˆ˜ì§„','í•œêµ­ë¬¼ë¥˜(ì£¼)',
                   'ìµœë™í˜„','(ì£¼)ì´ë§ˆíŠ¸','ì •í˜œì›','ì½”ì˜¤ë¡±ì¸ë”ìŠ¤íŠ¸ë¦¬','ì¥ì„±ë¯¼',
                   '(ì£¼)ë¡¯ë°ì¼€ë¯¸ì¹¼','ê¹€íƒœì˜','í™”ì„±ì‚°ì—…(ì£¼)','ë°•ì†Œì—°'];
  const msgs    = ['ì¸ë ¥ ë§¤ì¹­ ê´€ë ¨ ë¬¸ì˜ì…ë‹ˆë‹¤.','ë¹ ë¥¸ ì—°ë½ ë¶€íƒë“œë¦½ë‹ˆë‹¤.',
                   'ê²½í—˜ì ìš°ëŒ€í•©ë‹ˆë‹¤.','ì¥ê¸° ê·¼ë¬´ ê°€ëŠ¥í•œ ë¶„ ëª¨ì‹­ë‹ˆë‹¤.','ì¦‰ì‹œ ì¶œê·¼ ê°€ëŠ¥í•©ë‹ˆë‹¤.'];

  for (let i=1; i<=30; i++) {
    const d = new Date(Date.now() - Math.random()*60*86400000);
    applications.push({
      id: i, rowNum: i+1,
      ts: d.toISOString(),
      type: types[i%2],
      name: names[i % names.length],
      phone: `010-${String(1000+Math.floor(Math.random()*9000))}-${String(1000+Math.floor(Math.random()*9000))}`,
      job: jobs[Math.floor(Math.random()*jobs.length)],
      msg: msgs[Math.floor(Math.random()*msgs.length)],
      files: Math.random()>0.6 ? [{name:'ì´ë ¥ì„œ.pdf',url:''}] : [],
      fileCount: Math.random()>0.6 ? 1 : 0,
      status: statuses[Math.floor(Math.random()*4)],
      memo: '', fileLinks: []
    });
  }
  saveLocal();
}

function saveLocal() {
  localStorage.setItem(STORE_KEY, JSON.stringify(applications));
  document.getElementById('localCount').textContent = applications.length;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAS ì—°ë™
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function loadSavedGasUrl() {
  const url = localStorage.getItem(GAS_KEY) || (CFG.GAS_WEBHOOK_URL||'');
  if (url && !url.startsWith('YOUR_')) {
    document.getElementById('gasUrlInput').value = url;
    updateGasBanner(true);
  }
}

function saveGasUrl() {
  const url = document.getElementById('gasUrlInput').value.trim();
  if (!url || !url.startsWith('https://')) { Toast.show('ì˜¬ë°”ë¥¸ URLì„ ì…ë ¥í•˜ì„¸ìš”', 'error'); return; }
  localStorage.setItem(GAS_KEY, url);
  updateGasBanner(true);
  Toast.show('GAS URL ì €ì¥ ì™„ë£Œ! ë™ê¸°í™”ë¥¼ ëˆŒëŸ¬ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”.', 'success');
}

async function testGasUrl() {
  const url = document.getElementById('gasUrlInput').value.trim();
  if (!url) { Toast.show('URLì„ ë¨¼ì € ì…ë ¥í•˜ì„¸ìš”', 'warn'); return; }
  const el = document.getElementById('gasTestResult');
  el.textContent = 'â³ í…ŒìŠ¤íŠ¸ ì¤‘...'; el.style.color = 'var(--orange)';
  try {
    const res  = await fetch(url + '?action=health', { signal: AbortSignal.timeout(8000) });
    const data = await res.json();
    if (data.status === 'ok' || data.service) {
      el.textContent = 'âœ… ì—°ê²° ì„±ê³µ!'; el.style.color = 'var(--green)';
      Toast.show('GAS ì—°ê²° ì„±ê³µ! âœ…', 'success');
    } else {
      el.textContent = 'âš ï¸ ì‘ë‹µ ì´ìƒ'; el.style.color = 'var(--orange)';
    }
  } catch(e) {
    el.textContent = 'âŒ ì—°ê²° ì‹¤íŒ¨'; el.style.color = 'var(--red)';
    Toast.show('GAS ì—°ê²° ì‹¤íŒ¨: ' + e.message, 'error');
  }
}

async function syncFromGAS() {
  const url = localStorage.getItem(GAS_KEY) || document.getElementById('gasUrlInput').value.trim();
  if (!url || url.startsWith('YOUR_')) {
    Toast.show('âš™ï¸ ì„¤ì • íƒ­ì—ì„œ GAS URLì„ ë¨¼ì € ì…ë ¥í•˜ì„¸ìš”', 'warn');
    switchTab('settings'); return;
  }
  const btn = document.getElementById('syncBtn');
  btn.textContent = 'â³ ë™ê¸°í™” ì¤‘...'; btn.classList.add('loading');
  try {
    const res  = await fetch(url + '?action=list', { signal: AbortSignal.timeout(15000) });
    const json = await res.json();
    if (json.ok && Array.isArray(json.data)) {
      applications = json.data;
      isGASMode = true;
      saveLocal();
      renderTable(); updateStats();
      updateGasBanner(true, true);
      Toast.show(`âœ… GAS ë™ê¸°í™” ì™„ë£Œ: ${json.data.length}ê±´`, 'success');
      document.getElementById('dataSourceBadge').textContent = 'ğŸŸ¢ êµ¬ê¸€ ì‹œíŠ¸ ì—°ë™';
      document.getElementById('dataSourceBadge').style.background = 'var(--green)';
    } else {
      Toast.show('GAS ì‘ë‹µ ì˜¤ë¥˜: ' + JSON.stringify(json), 'error');
    }
  } catch(e) {
    Toast.show('ë™ê¸°í™” ì‹¤íŒ¨: ' + e.message, 'error');
    console.error('GAS sync error:', e);
  } finally {
    btn.textContent = 'ğŸ”„ GAS ë™ê¸°í™”'; btn.classList.remove('loading');
  }
}

function updateGasBanner(configured, synced) {
  const banner = document.getElementById('gasBanner');
  const badge  = document.getElementById('gasStatusBadge');
  if (synced) {
    banner.className = 'gas-banner';
    banner.innerHTML = `
      <span class="gas-banner-icon">âœ…</span>
      <div class="gas-banner-text">
        <b>êµ¬ê¸€ ì‹œíŠ¸ ì‹¤ì‹œê°„ ì—°ë™ ì¤‘</b>
        <span>ì‹ ì²­ ë°ì´í„°ê°€ êµ¬ê¸€ ì‹œíŠ¸ì™€ ë™ê¸°í™”ë©ë‹ˆë‹¤. ë§ˆì§€ë§‰ ë™ê¸°í™”: ${new Date().toLocaleTimeString('ko-KR')}</span>
      </div>`;
    badge.className = 'gas-status ok'; badge.textContent = 'ğŸŸ¢ GAS ì—°ë™';
  } else if (configured) {
    banner.className = 'gas-banner warn';
    banner.innerHTML = `
      <span class="gas-banner-icon">ğŸ”—</span>
      <div class="gas-banner-text">
        <b>GAS URL ì„¤ì •ë¨ â€” ë™ê¸°í™” í•„ìš”</b>
        <span>GAS URLì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤. ğŸ”„ GAS ë™ê¸°í™” ë²„íŠ¼ì„ ëˆŒëŸ¬ ì‹¤ì œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ì„¸ìš”.</span>
      </div>
      <button class="btn btn-navy btn-sm" onclick="syncFromGAS()">ì§€ê¸ˆ ë™ê¸°í™”</button>`;
    badge.className = 'gas-status local'; badge.textContent = 'âš ï¸ ë™ê¸°í™” í•„ìš”';
  }
}

/* â”€â”€ ìƒíƒœ ì—…ë°ì´íŠ¸ â†’ GASì—ë„ ë°˜ì˜ â”€â”€â”€â”€â”€â”€ */
async function changeStatus(id, newStatus) {
  const app = applications.find(r => r.id == id);
  if (!app) return;
  app.status = newStatus; saveLocal();
  renderTable(); updateStats();

  const gasUrl = localStorage.getItem(GAS_KEY);
  if (gasUrl && isGASMode && app.rowNum) {
    try {
      await fetch(gasUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ action:'updateStatus', rowNum: app.rowNum, status: newStatus, memo: app.memo||'' })
      });
      Toast.show(`ìƒíƒœ ë³€ê²½ ì™„ë£Œ â†’ ${newStatus} (ì‹œíŠ¸ ë°˜ì˜ë¨)`, 'success');
    } catch(e) {
      Toast.show(`ìƒíƒœ ë³€ê²½ ì™„ë£Œ â†’ ${newStatus} (ì‹œíŠ¸ ë°˜ì˜ ì‹¤íŒ¨)`, 'warn');
    }
  } else {
    Toast.show(`ìƒíƒœ ë³€ê²½: ${newStatus}`, 'success');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì¹´ì¹´ì˜¤ ì„¤ì •
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function loadSavedKakaoKey() {
  const key = localStorage.getItem(KAKAO_KEY2) || (CFG.KAKAO_JS_KEY||'');
  if (key && !key.startsWith('YOUR_')) {
    document.getElementById('kakaoKeyInput').value = key;
    tryInitKakao(key);
    updateKakaoStatusUI();
  }
}

function saveKakaoKey() {
  const key = document.getElementById('kakaoKeyInput').value.trim();
  if (!key || key.length < 16) { Toast.show('ì˜¬ë°”ë¥¸ ì¹´ì¹´ì˜¤ JS í‚¤ë¥¼ ì…ë ¥í•˜ì„¸ìš” (32ì)', 'error'); return; }
  localStorage.setItem(KAKAO_KEY2, key);
  tryInitKakao(key);
  Toast.show('ì¹´ì¹´ì˜¤ í‚¤ ì €ì¥ ì™„ë£Œ! ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.', 'success');
  updateKakaoStatusUI();
}

function tryInitKakao(key) {
  if (!window.Kakao) return;
  if (!Kakao.isInitialized()) {
    try { Kakao.init(key); console.log('âœ… ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”:', key.slice(0,8)+'...'); }
    catch(e) { console.error('ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™” ì‹¤íŒ¨:', e); }
  }
}

function updateKakaoStatusUI() {
  const el    = document.getElementById('kakaoLoginStatus2');
  if (!el) return;
  const token = localStorage.getItem('bw_kakao_token');
  const exp   = parseInt(localStorage.getItem('bw_kakao_token_exp')||'0');
  const valid = token && Date.now() < exp;
  el.innerHTML = valid
    ? `<span style="color:var(--green);font-weight:700">ğŸŸ¢ ì¹´ì¹´ì˜¤ ì•Œë¦¼ í™œì„±í™”ë¨</span>
       <button class="btn btn-outline btn-sm" onclick="kakaoLogout()" style="margin-left:10px">ë¡œê·¸ì•„ì›ƒ</button>`
    : `<span style="color:var(--red)">ğŸ”´ ë¯¸ì—°ê²°</span>
       <button class="btn btn-gold btn-sm" onclick="kakaoLogin()" style="margin-left:10px">ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸</button>`;
}

function kakaoLogin() {
  if (!window.Kakao || !Kakao.isInitialized()) {
    Toast.show('ì¹´ì¹´ì˜¤ í‚¤ë¥¼ ë¨¼ì € ì €ì¥í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”', 'warn'); return;
  }
  Kakao.Auth.login({
    scope: 'talk_message',
    success(auth) {
      localStorage.setItem('bw_kakao_token',     auth.access_token);
      localStorage.setItem('bw_kakao_token_exp', Date.now() + auth.expires_in * 1000);
      updateKakaoStatusUI();
      Toast.show('âœ… ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì„±ê³µ! ì‹ ì²­ ì‹œ ì¹´ì¹´ì˜¤í†¡ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.', 'success');
    },
    fail(err) { Toast.show('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + JSON.stringify(err), 'error'); }
  });
}

function kakaoLogout() {
  localStorage.removeItem('bw_kakao_token');
  localStorage.removeItem('bw_kakao_token_exp');
  updateKakaoStatusUI();
  Toast.show('ì¹´ì¹´ì˜¤ ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ', 'info');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   í…Œì´ë¸” ë Œë”ë§
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function getFiltered() {
  const kw     = (document.getElementById('searchInput')?.value||'').toLowerCase();
  const type   = document.getElementById('typeFilter')?.value||'';
  const status = document.getElementById('statusFilter')?.value||'';
  const from   = document.getElementById('dateFrom')?.value||'';
  const to     = document.getElementById('dateTo')?.value||'';

  return applications.filter(r => {
    if (type   && r.type   !== type)   return false;
    if (status && r.status !== status) return false;
    if (kw && !JSON.stringify([r.name,r.phone,r.job,r.msg]).toLowerCase().includes(kw)) return false;
    if (from && r.ts < from) return false;
    if (to   && r.ts.slice(0,10) > to) return false;
    return true;
  }).sort((a,b) => {
    const av = a[sortKey]||'', bv = b[sortKey]||'';
    return av < bv ? -sortDir : av > bv ? sortDir : 0;
  });
}

function renderTable() {
  const filtered = getFiltered();
  const total    = filtered.length;
  const totalPg  = Math.ceil(total/PAGE_SIZE)||1;
  if (currentPage > totalPg) currentPage = totalPg;
  const slice    = filtered.slice((currentPage-1)*PAGE_SIZE, currentPage*PAGE_SIZE);

  document.getElementById('resultCount').textContent = `${total}ê±´`;
  document.getElementById('emptyState').style.display = total === 0 ? 'block' : 'none';
  document.getElementById('mainTable').style.display  = total === 0 ? 'none'  : '';

  const tbody = document.getElementById('tableBody');
  tbody.innerHTML = slice.map(r => {
    const ts = new Date(r.ts).toLocaleString('ko-KR',{month:'2-digit',day:'2-digit',hour:'2-digit',minute:'2-digit'});
    const msgShort = (r.msg||'').slice(0,25)+((r.msg||'').length>25?'â€¦':'');
    const fileCount = r.files?.length || r.fileCount || 0;
    const fileIcon = fileCount
      ? `<span class="file-badge" title="ì²¨ë¶€íŒŒì¼ ${fileCount}ê°œ" onclick="openDetail(${r.id})">ğŸ“${fileCount}</span>`
      : '<span style="color:var(--gray-400)">-</span>';
    const checked = selectedIds.has(r.id) ? 'checked' : '';
    return `
    <tr id="row-${r.id}" ${selectedIds.has(r.id)?'class="selected"':''}>
      <td class="td-check"><input type="checkbox" ${checked} onchange="toggleRow(${r.id},this)"></td>
      <td style="white-space:nowrap;font-size:12px">${ts}</td>
      <td><span class="tag-type ${r.type==='êµ¬ì¸'?'tag-hire':'tag-seek'}">${r.type}</span></td>
      <td><strong>${r.name||'-'}</strong></td>
      <td style="font-size:12px">${r.phone||'-'}</td>
      <td style="font-size:12px">${r.job||'-'}</td>
      <td style="font-size:12px;color:var(--gray-600)">${msgShort}</td>
      <td>${fileIcon}</td>
      <td>
        <select class="status-sel st-${r.status}" onchange="changeStatus(${r.id},this.value)">
          <option ${r.status==='ì ‘ìˆ˜'?'selected':''}>ì ‘ìˆ˜</option>
          <option ${r.status==='ì§„í–‰ì¤‘'?'selected':''}>ì§„í–‰ì¤‘</option>
          <option ${r.status==='ì™„ë£Œ'?'selected':''}>ì™„ë£Œ</option>
          <option ${r.status==='ë³´ë¥˜'?'selected':''}>ë³´ë¥˜</option>
        </select>
      </td>
      <td>
        <div class="action-btns">
          <button class="btn btn-outline btn-sm" onclick="openDetail(${r.id})">ìƒì„¸</button>
          <button class="btn btn-red btn-sm" onclick="deleteOne(${r.id})">ì‚­ì œ</button>
        </div>
      </td>
    </tr>`;
  }).join('');

  renderPagination(totalPg);

  // ìƒíƒœ ì„ íƒ ë°•ìŠ¤ ìƒ‰ìƒ ë™ê¸°í™”
  tbody.querySelectorAll('.status-sel').forEach(sel => {
    sel.className = `status-sel st-${sel.value}`;
    sel.onchange = function() {
      this.className = `status-sel st-${this.value}`;
      const rowId = parseInt(this.closest('tr').id.replace('row-',''));
      changeStatus(rowId, this.value);
    };
  });
}

function updateStats() {
  document.getElementById('statTotal').textContent      = applications.length;
  document.getElementById('statPending').textContent    = applications.filter(r=>r.status==='ì ‘ìˆ˜').length;
  document.getElementById('statInProgress').textContent = applications.filter(r=>r.status==='ì§„í–‰ì¤‘').length;
  document.getElementById('statDone').textContent       = applications.filter(r=>r.status==='ì™„ë£Œ').length;
}

function renderPagination(totalPg) {
  const pg = document.getElementById('pgBtns');
  const filtered = getFiltered();
  document.getElementById('pgInfo').textContent =
    `${(currentPage-1)*PAGE_SIZE+1}â€“${Math.min(currentPage*PAGE_SIZE, filtered.length)} / ${filtered.length}ê±´`;
  let html = '';
  const start = Math.max(1,currentPage-2), end = Math.min(totalPg,start+4);
  if (currentPage>1) html += `<button class="pg-btn" onclick="gotoPage(${currentPage-1})">â€¹</button>`;
  for(let i=start;i<=end;i++) html += `<button class="pg-btn${i===currentPage?' active':''}" onclick="gotoPage(${i})">${i}</button>`;
  if (currentPage<totalPg) html += `<button class="pg-btn" onclick="gotoPage(${currentPage+1})">â€º</button>`;
  pg.innerHTML = html;
}

function gotoPage(n) { currentPage = n; renderTable(); }
function sortBy(key) {
  if (sortKey===key) sortDir*=-1; else { sortKey=key; sortDir=-1; }
  document.querySelectorAll('thead th').forEach(th => th.classList.remove('sort-asc','sort-desc'));
  renderTable();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   í•„í„°/ê²€ìƒ‰
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let searchTimer;
document.addEventListener('DOMContentLoaded',()=>{
  const si = document.getElementById('searchInput');
  if(si) si.addEventListener('input',()=>{ clearTimeout(searchTimer); searchTimer=setTimeout(()=>{currentPage=1;renderTable();},250); });
});

function filterByStatus(s) {
  document.getElementById('statusFilter').value = s;
  currentPage=1; renderTable();
}

function resetFilters() {
  ['searchInput','typeFilter','statusFilter','dateFrom','dateTo']
    .forEach(id => { const el=document.getElementById(id); if(el) el.value=''; });
  currentPage=1; renderTable();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì„ íƒ/ì‚­ì œ
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleAll(cb) {
  const filtered = getFiltered().slice((currentPage-1)*PAGE_SIZE, currentPage*PAGE_SIZE);
  if (cb.checked) filtered.forEach(r=>selectedIds.add(r.id));
  else            filtered.forEach(r=>selectedIds.delete(r.id));
  renderTable();
  document.getElementById('bulkDelBtn').style.display = selectedIds.size > 0 ? '' : 'none';
}
function toggleRow(id, cb) {
  if(cb.checked) selectedIds.add(id); else selectedIds.delete(id);
  document.getElementById('bulkDelBtn').style.display = selectedIds.size > 0 ? '' : 'none';
}
function selectAll() {
  applications.forEach(r=>selectedIds.add(r.id));
  renderTable();
  document.getElementById('bulkDelBtn').style.display = '';
}
function bulkDelete() {
  if (!confirm(`ì„ íƒëœ ${selectedIds.size}ê°œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) return;
  applications = applications.filter(r=>!selectedIds.has(r.id));
  selectedIds.clear(); saveLocal(); renderTable(); updateStats();
  Toast.show('ì‚­ì œ ì™„ë£Œ', 'success');
}
function deleteOne(id) {
  if (!confirm('ì´ í•­ëª©ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
  applications = applications.filter(r=>r.id!=id);
  saveLocal(); renderTable(); updateStats();
  Toast.show('ì‚­ì œ ì™„ë£Œ', 'success');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ìƒì„¸ ëª¨ë‹¬
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function openDetail(id) {
  const app = applications.find(r=>r.id==id);
  if (!app) return;
  selectedId = id;
  document.getElementById('modalTitle').textContent = `ì‹ ì²­ ìƒì„¸ â€” ${app.name}`;

  const fileLinks = (app.fileLinks||[]).map(f=>
    `<a href="${f.url}" target="_blank">ğŸ“ ${f.name}</a>`).join('');
  const localFiles = (app.files||[]).filter(f=>!f.url).map(f=>`<span>ğŸ“ ${f.name}</span>`).join('');

  document.getElementById('modalBody').innerHTML = `
    <div class="detail-row"><span class="detail-label">ğŸ“‹ ìœ í˜•</span>
      <span class="detail-val"><span class="tag-type ${app.type==='êµ¬ì¸'?'tag-hire':'tag-seek'}">${app.type}</span></span></div>
    <div class="detail-row"><span class="detail-label">ğŸ‘¤ ì´ë¦„</span>
      <span class="detail-val"><strong>${app.name}</strong></span></div>
    <div class="detail-row"><span class="detail-label">ğŸ“ ì—°ë½ì²˜</span>
      <span class="detail-val"><a href="tel:${app.phone}">${app.phone}</a></span></div>
    <div class="detail-row"><span class="detail-label">ğŸ’¼ ì—…ì¢…</span>
      <span class="detail-val">${app.job||'-'}</span></div>
    <div class="detail-row"><span class="detail-label">ğŸ“ ë‚´ìš©</span>
      <span class="detail-val" style="white-space:pre-wrap">${app.msg||'-'}</span></div>
    <div class="detail-row"><span class="detail-label">â° ì ‘ìˆ˜ì¼</span>
      <span class="detail-val">${new Date(app.ts).toLocaleString('ko-KR')}</span></div>
    ${(fileLinks||localFiles) ? `<div class="detail-row"><span class="detail-label">ğŸ“ ì²¨ë¶€</span>
      <div class="detail-files detail-val">${fileLinks||localFiles}</div></div>` : ''}
    <div class="detail-row" style="margin-top:8px">
      <span class="detail-label">ğŸ“Œ ìƒíƒœ</span>
      <select class="status-sel st-${app.status}" id="modalStatusSel" onchange="this.className='status-sel st-'+this.value">
        <option ${app.status==='ì ‘ìˆ˜'?'selected':''}>ì ‘ìˆ˜</option>
        <option ${app.status==='ì§„í–‰ì¤‘'?'selected':''}>ì§„í–‰ì¤‘</option>
        <option ${app.status==='ì™„ë£Œ'?'selected':''}>ì™„ë£Œ</option>
        <option ${app.status==='ë³´ë¥˜'?'selected':''}>ë³´ë¥˜</option>
      </select>
    </div>
    <div class="detail-row"><span class="detail-label">ğŸ—’ï¸ ë©”ëª¨</span>
      <textarea class="memo-area" id="memoArea" placeholder="ì²˜ë¦¬ ë©”ëª¨ë¥¼ ì…ë ¥í•˜ì„¸ìš”...">${app.memo||''}</textarea></div>`;

  document.getElementById('detailModal').classList.add('show');
}

function closeModal() { document.getElementById('detailModal').classList.remove('show'); }

function saveMemo() {
  const app  = applications.find(r=>r.id==selectedId);
  if (!app) return;
  app.memo   = document.getElementById('memoArea').value;
  const newSt= document.getElementById('modalStatusSel').value;
  if (app.status !== newSt) changeStatus(selectedId, newSt);
  else { saveLocal(); Toast.show('ë©”ëª¨ ì €ì¥ ì™„ë£Œ', 'success'); }
  closeModal();
}

function deleteFromModal() {
  deleteOne(selectedId); closeModal();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CSV ë‚´ë³´ë‚´ê¸°
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function exportCSV() {
  const headers = ['No','ì ‘ìˆ˜ì¼ì‹œ','ìœ í˜•','ì´ë¦„/ì—…ì²´','ì—°ë½ì²˜','ì—…ì¢…/ì§ì¢…','ë¬¸ì˜ë‚´ìš©','ìƒíƒœ','ë©”ëª¨'];
  const rows = getFiltered().map((r,i) => [
    i+1,
    new Date(r.ts).toLocaleString('ko-KR'),
    r.type, r.name, r.phone, r.job,
    (r.msg||'').replace(/,/g,'ï¼Œ').replace(/\n/g,' '),
    r.status, r.memo||''
  ]);
  const csv = '\uFEFF' + [headers, ...rows].map(r=>r.join(',')).join('\n');
  const blob = new Blob([csv], { type:'text/csv;charset=utf-8;' });
  const a    = document.createElement('a');
  a.href     = URL.createObjectURL(blob);
  a.download = `ë¸Œë¦¿ì§€ì›ìŠ¤_ì‹ ì²­ë°ì´í„°_${new Date().toISOString().slice(0,10)}.csv`;
  a.click();
  Toast.show('CSV ë‹¤ìš´ë¡œë“œ ì™„ë£Œ', 'success');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ë°ì´í„° ì´ˆê¸°í™”
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function clearLocalData() {
  if (!confirm('ë¡œì»¬ ë°ì´í„°ë¥¼ ëª¨ë‘ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n(êµ¬ê¸€ ì‹œíŠ¸ ë°ì´í„°ëŠ” ì‚­ì œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤)')) return;
  localStorage.removeItem(STORE_KEY);
  applications = [];
  generateSampleData();
  renderTable(); updateStats();
  Toast.show('ë¡œì»¬ ë°ì´í„° ì´ˆê¸°í™” ì™„ë£Œ', 'info');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   íƒ­ ì „í™˜
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function switchTab(name) {
  document.querySelectorAll('.tab-panel').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
  document.querySelectorAll('.header-nav a').forEach(el => el.classList.remove('active'));
  document.getElementById(`tab-${name}`)?.classList.add('active');
  document.getElementById(`tab-btn-${name}`)?.classList.add('active');
  document.getElementById(`tab-nav-${name}`)?.classList.add('active');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   í† ìŠ¤íŠ¸
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const Toast = {
  show(msg, type='info', dur=3500) {
    const wrap = document.getElementById('toastWrap');
    const el   = document.createElement('div');
    el.className = `toast ${type}`;
    const icons = {success:'âœ…',error:'âŒ',warn:'âš ï¸',info:'â„¹ï¸'};
    el.innerHTML = `<span>${icons[type]||'â€¢'}</span> ${msg}`;
    wrap.appendChild(el);
    setTimeout(() => { el.style.opacity='0'; el.style.transform='translateX(100%)';
      setTimeout(()=>el.remove(), 300); }, dur);
  }
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì‹œê³„
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function startClock() {
  const el = document.getElementById('liveClock');
  setInterval(()=>{ el.textContent = new Date().toLocaleTimeString('ko-KR'); }, 1000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   ì´ˆê¸°í™”
   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
window.addEventListener('DOMContentLoaded', () => {
  // Enter í‚¤ ë¡œê·¸ì¸
  document.getElementById('loginPw').addEventListener('keydown', e => {
    if (e.key === 'Enter') doLogin();
  });
  // ëª¨ë‹¬ ì˜¤ë²„ë ˆì´ í´ë¦­ ë‹«ê¸°
  document.getElementById('detailModal').addEventListener('click', e => {
    if (e.target.id === 'detailModal') closeModal();
  });
  // ì„¸ì…˜ ìœ ì§€ í™•ì¸
  if (sessionStorage.getItem(PASS_KEY)) {
    document.getElementById('loginOverlay').classList.add('hidden');
    initApp();
  }
  // ì¹´ì¹´ì˜¤ SDK ë¡œë“œ í™•ì¸
  const kakaoScript = document.createElement('script');
  kakaoScript.src = 'https://developers.kakao.com/sdk/js/kakao.min.js';
  kakaoScript.onload = () => {
    const savedKey = localStorage.getItem(KAKAO_KEY2);
    if (savedKey && !savedKey.startsWith('YOUR_')) tryInitKakao(savedKey);
    updateKakaoStatusUI();
  };
  document.head.appendChild(kakaoScript);
});
</script>
</body>
</html>
